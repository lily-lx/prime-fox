{{ define "main" }}

<div class="photos-page">

  <!-- 页面标题 -->
  <header class="page-header">
    <h1>{{ .Title }}</h1>
  </header>

  <!-- ========================= -->
  <!-- ① Group Photos -->
  <!-- ========================= -->
  <section class="photos-section">
    <h2>Group Photos</h2>

    {{ $groups := where .Site.RegularPages "Section" "photos" }}
    {{ $groups = where $groups "File.Dir" "in" "photos/group/" }}

    {{ if gt (len $groups) 0 }}
      {{ range $groups }}
        <div class="photo-group">
          <h3>{{ .Title }}</h3>

          {{ with .Resources.ByType "image" }}
          <div class="photo-grid">
            {{ range . }}
              <img src="{{ .RelPermalink }}" alt="">
            {{ end }}
          </div>
          {{ end }}

        </div>
      {{ end }}
    {{ else }}
      <p class="empty-hint">No group photos yet.</p>
    {{ end }}
  </section>

  <!-- ========================= -->
  <!-- ② Projects & Videos -->
  <!-- ========================= -->
  <section class="projects-section">
    <h2>Projects &amp; Presentations</h2>

    {{ $projects := where .Site.RegularPages "Section" "photos" }}
    {{ $projects = where $projects "File.Dir" "in" "photos/projects/" }}

    {{ if gt (len $projects) 0 }}
      {{ range $projects }}
        <div class="project-block">
          <h3>{{ .Title }}</h3>

          {{ with .Params.video }}
            <div class="video-wrapper">
              {{ . | safeHTML }}
            </div>
          {{ end }}

        </div>
      {{ end }}
    {{ else }}
      <p class="empty-hint">No project videos yet.</p>
    {{ end }}
  </section>

</div>

{{ end }}

{{ define "main" }}

<div class="photos-page">

  <header class="page-header">
    <h1>{{ .Title }}</h1>
  </header>

  <!-- ================= Group Photos ================= -->
<section class="photos-section">
  <h2>Group Photos</h2>

  {{ $found := false }}

  {{ range .Site.RegularPages }}
    {{ if strings.HasPrefix .File.Path "photos/group/" }}
      {{ if not $found }}{{ $found = true }}{{ end }}
      {{ partial "photo-grid.html" . }}
    {{ end }}
  {{ end }}

  {{ if not $found }}
    <p class="empty-hint">No group photos yet.</p>
  {{ end }}
</section>

  <!-- ================= Projects & Presentations ================= -->
  <section class="projects-section" style="margin-top:48px;">
    <h2>Projects &amp; Presentations</h2>
      <p style="color:red;font-weight:bold;">
    DEBUG: Projects section rendered
        <p style="color:green;">DEBUG: Listing all RegularPages</p>

<ul style="font-size:12px; line-height:1.6;">
{{ range .Site.RegularPages }}
  <li>
    {{ .File.Path }} |
    Section={{ .Section }} |
    Type={{ .Type }}
  </li>
{{ end }}
</ul>

  </p>
{{ $projects := slice }}
{{ range .Site.RegularPages }}
  {{ if strings.HasPrefix .File.Path "photos/projects/" }}
    {{ $projects = $projects | append . }}
  {{ end }}
{{ end }}
 

    {{ if gt (len $projects) 0 }}
      {{ range $projects }}
        <h3>{{ .Title }}</h3>

        {{ with .Params.video }}
          <iframe
            src="{{ . }}"
            width="560"
            height="315"
            frameborder="0"
            allowfullscreen>
          </iframe>
        {{ end }}

      {{ end }}
    {{ else }}
      <p>No project videos yet.</p>
    {{ end }}
  </section>

</div>

{{ end }}

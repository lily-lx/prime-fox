<div class="project-block">
  <h3>{{ .Title }}</h3>

  {{/* ===== 视频区域 ===== */}}
  {{ $videos := .Resources.Match "*.mp4" }}

  {{ if or (gt (len $videos) 0) .Params.video_id }}
    <div class="project-video-grid">

      {{/* 本地视频 */}}
      {{ range $videos }}
        <div class="project-video">
          <video controls preload="metadata">
            <source src="{{ .RelPermalink }}" type="video/mp4">
          </video>
        </div>
      {{ end }}

      {{/* Bilibili / YouTube */}}
      {{ if .Params.video_id }}
        <div class="project-video">
          {{ if eq .Params.platform "bilibili" }}
            <iframe
              src="https://player.bilibili.com/player.html?bvid={{ .Params.video_id }}"
              frameborder="0"
              allowfullscreen>
            </iframe>
          {{ else if eq .Params.platform "youtube" }}
            <iframe
              src="https://www.youtube.com/embed/{{ .Params.video_id }}"
              frameborder="0"
              allowfullscreen>
            </iframe>
          {{ end }}
        </div>
      {{ end }}

    </div>
  {{ end }}

  {{/* ===== 图片 ===== */}}
  {{ $images := .Resources.ByType "image" }}
  {{ if gt (len $images) 0 }}
    <div class="photo-grid">
      {{ range $images }}
        <img src="{{ .RelPermalink }}" alt="">
      {{ end }}
    </div>
  {{ end }}
</div>
